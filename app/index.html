<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Zelda Treasure Chest</title>
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="css/style.css">

</head>

<body>
  <input type="checkbox" id="top-checkbox"/><label for="top-checkbox" id="treasurechest">
<div id="treasurechest-top">
</div>
</label>
<div id="treasurechest-bottom"></div>
<div id="treasurechest-bg"></div>
  <div id="rupee"></div>
<audio id="treasure-sound">
  <source src="sound/chest.mp3"></source>
Your browser isn't invited for super fun audio time.
</audio>
<div id="instructions"></div>
  
    <script src="js/index.js"></script>
    
    <script>
        // insert SW script here
        if('serviceWorker' in navigator) {
            navigator.serviceWorker
                    .register('/sw.js')
                    .then(
                        function(registration){
                            console.log(registration)
                            console.log('yay service worker registered');
                            if ('PushManager' in window) {
                            askPermission()
                            .then(
                                ()=>{
                                    console.log('accepted');               
                                },
                                ()=>{
                                    console.log('rejected');
                                })
                        }

                        }
                    )
        }
        
        function askPermission() {
            return new Promise(function(resolve, reject) {
                const permissionResult = Notification.requestPermission(function(result) {
                resolve(result);
                });

                if (permissionResult) {
                permissionResult.then(resolve, reject);
                }
            })
            .then(function(permissionResult) {
                if (permissionResult !== 'granted') {
                throw new Error('We weren\'t granted permission.');
                }
            });
        }

      
    </script>

</body>
</html>
